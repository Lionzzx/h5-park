(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tools/latestPolicy/latestPolicy"],{"2fc5":function(t,e,i){},"315a":function(t,e,i){"use strict";i.r(e);var n=i("80a7"),a=i("d3b6");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("a0e2");var s=i("2877"),c=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=c.exports},"4ccb":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("a34a")),a=i("42ad"),r=i("0bab");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){return u(t)||l(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function h(t,e,i,n,a,r,s){try{var c=t[r](s),o=c.value}catch(l){return void i(l)}c.done?e(o):Promise.resolve(o).then(n,a)}function d(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var r=t.apply(e,i);function s(t){h(r,n,a,s,c,"next",t)}function c(t){h(r,n,a,s,c,"throw",t)}s(void 0)})}}var f=[],p={data:function(){return{provinceList:[],city:[],title:"",cityId:"",isSelect:!1,show:!1,list:[],detail:{},value:[0,0],indicatorStyle:"height: ".concat(Math.round(t.getSystemInfoSync().screenWidth/7.5),"px;"),loading:!1,page:0,pageSize:10,hasMore:!0,myArea:""}},onShow:function(){var e=d(n.default.mark(function e(){var i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.hanleGetUserCity();case 2:i=t.getStorageSync("province"),i?(f=i,this.provinceList=i.map(function(t){return t.province.realname})):this.getProvince(),this.handleDefaultProvince();case 5:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}(),methods:{hanleGetUserCity:function(){var t=d(n.default.mark(function t(){var e;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.channelLogicApi.getUserCity();case 3:e=t.sent,this.cityId=e.city,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$api.toast("获取地址失败");case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}},t,this,[[0,7,10,12]])}));function e(){return t.apply(this,arguments)}return e}(),handleDefaultProvince:function(){var t,e=this,i=this.cityId,n=f.findIndex(function(n,a){return-1!=n.city.findIndex(function(n,a){if(n.id==i)return e.myArea=n.realname,t=a,!0})});this.value=[n,t],this.city=f[n].city.map(function(t){return t.realname})},getProvince:function(){var e=d(n.default.mark(function e(){return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,a.channelLogicApi.GetProvinceList();case 4:f=e.sent,this.provinceList=f.map(function(t){return t.province.realname}),t.setStorageSync("province",f),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,9,11,14]])}));function i(){return e.apply(this,arguments)}return i}(),onFocus:function(){this.isSelect=!1},onBlur:function(t){var e=t.detail.value;this.title=e},scrolltolower:function(t){this.getList()},getList:function(){var t=d(n.default.mark(function t(){var e;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,this.hasMore){t.next=3;break}return t.abrupt("return",!1);case 3:return this.page||(this.list=[]),this.page=Number(this.page)+1,t.prev=5,t.next=8,a.channelLogicApi.PolicyList({city:this.myArea,title:this.title,page:this.page,pageSize:this.pageSize});case 8:e=t.sent,e.result.length||(this.$api.toast("查询暂无结果"),this.page=0),this.hasMore=e.total>this.page*this.pageSize,this.list=[].concat(c(this.list),c(e.result.map(function(t){return t.Date=(0,r.formatDate)(t.Date,"yyyy-MM-dd"),t}))),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](5);case 16:return t.prev=16,this.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,this,[[5,14,16,19]])}));function e(){return t.apply(this,arguments)}return e}(),handleSelectAddress:function(){this.isSelect=!this.isSelect,this.list=[]},handleSearch:function(){var t=d(n.default.mark(function t(){return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isSelect=!1,this.page=[],this.title){t.next=4;break}return t.abrupt("return",this.$api.toast("请输入关键字"));case 4:if(!this.loading){t.next=6;break}return t.abrupt("return");case 6:this.getList();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),bindChange:function(t){var e=t.detail.value;console.log(e),this.value=e,this.city=f[e[0]].city.map(function(t){return t.realname}),this.myArea=this.city[e[1]]},navBack:function(){t.navigateTo({url:"/pages/index/index"})},selectOk:function(){this.isSelect=!1,this.list=[]},showDetail:function(t){this.show=!0,this.detail=this.list[t]},hidePopup:function(){this.show=!1}}};e.default=p}).call(this,i("5486")["default"])},"80a7":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"page",attrs:{_hid:0}},[i("view",{class:{blur:t.loading},attrs:{_hid:1}},[i("image",{staticClass:"bg",attrs:{src:"../../../static/latestPolicy_bg.png",mode:"true",_hid:2},on:{click:function(e){return"button"in e||!t._k(e.keyCode,"stop",void 0,e.key,void 0)?t.selectOk(e):null}}}),i("view",{staticClass:"back",attrs:{_hid:3},on:{tap:t.navBack}},[]),i("view",{staticClass:"search",attrs:{_hid:5}},[i("view",{staticClass:"search__left",attrs:{_hid:6},on:{tap:t.handleSelectAddress}},[t._v(t._s(t.myArea),7),i("view",{staticClass:"trangle",attrs:{_hid:8}})]),i("view",{staticClass:"search__input",attrs:{_hid:9}},[i("input",{attrs:{"placeholder-style":"font-size:14px;color:rgba(44,34,34,0.24);",placeholder:"搜索关键字",_hid:10},on:{focus:t.onFocus,blur:t.onBlur}})]),i("view",{staticClass:"search__right",attrs:{_hid:11},on:{tap:t.handleSearch}},[i("image",{attrs:{src:"../../../static/search__input.png",mode:"true",_hid:12}})])]),t._ri(!!t.isSelect,13)?i("picker-view",{staticClass:"picker",attrs:{"indicator-class":"selectClass","indicator-style":t.indicatorStyle,value:t.value,_hid:13,_batrs:"indicator-style,value"},on:{change:t.bindChange}},[i("picker-view-column",{attrs:{_hid:14,_cid:0}},t._l(t.provinceList,function(e,n,a){var r=void 0!==a?a:n;return i("view",{key:n,staticClass:"item",attrs:{_hid:1016,_fid:r,_fk:"index"}},[t._v(t._s(e),1017,r)])},1016,t._self)),i("picker-view-column",{attrs:{_hid:1018,_cid:1}},t._l(t.city,function(e,n,a){var r=void 0!==a?a:n;return i("view",{key:n,staticClass:"item",attrs:{_hid:2020,_fid:r,_fk:"index"},on:{click:t.handleQuit}},[t._v(t._s(e),2021,r)])},2020,t._self))],1):t._e(),t._ri(!!t.list.length,2022)?i("scroll-view",{staticClass:"content",attrs:{"scroll-y":"true","scroll-with-animation":"true",_hid:2022},on:{scrolltolower:t.scrolltolower}},t._l(t.list,function(e,n,a){var r=void 0!==a?a:n;return i("view",{key:e.id,staticClass:"content-item",attrs:{_hid:2023,_fid:r,_fk:"id"},on:{tap:function(e){t.showDetail(n)}}},[i("view",{staticClass:"title",attrs:{_hid:2024,_fid:r}},[t._v(t._s(e.Title),2025,r)]),i("view",{staticClass:"disc",attrs:{_hid:2026,_fid:r}},[t._v(t._s(e.Province),2027,r),i("text",{staticStyle:{margin:"0 20rpx"},attrs:{_hid:2028,_fid:r}},[t._v(t._s(e.Label),2029,r)]),t._v(t._s(e.Date),2030,r)])])},2023,t._self)):t._e(),i("x-popup",{attrs:{bgColor:"#fff",show:t.show,title:t.detail.Title,_hid:2031,_batrs:"show,title",_cid:2},on:{hidePopup:t.hidePopup}},[i("scroll-view",{staticClass:"popus",staticStyle:{padding:"0"},attrs:{"scroll-y":"true","scroll-with-animation":"true",_hid:3033}},[i("view",{staticClass:"popus",attrs:{_hid:3034}},[i("rich-text",{attrs:{nodes:t.detail.HContent,_hid:3035,_batrs:"nodes"}})],1)])],1)],1),i("x-Loading",{attrs:{show:t.loading,_hid:3036,_batrs:"show",_cid:3}})],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},a0e2:function(t,e,i){"use strict";var n=i("2fc5"),a=i.n(n);a.a},d3b6:function(t,e,i){"use strict";i.r(e);var n=i("4ccb"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},d4b8:function(t,e,i){"use strict";i("be16");var n=r(i("315a")),a=r(i("3a53"));function r(t){return t&&t.__esModule?t:{default:t}}n.default.mpType="page";var s=new a.default(n.default);s.$mount()}},[["d4b8","common/runtime","common/vendor"]]]);